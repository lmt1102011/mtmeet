<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Login</title>
<style>
body{background:#0b1b2b;color:#e8eaed;font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
.container{background:#12161a;padding:20px;border-radius:12px;max-width:360px;width:100%;text-align:center}
input{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:none;background:#0b1115;color:#e8eaed}
button{padding:10px 14px;border:none;border-radius:6px;background:#2196f3;color:#fff;cursor:pointer;width:100%}
button:hover{opacity:0.9}
a{color:#2196f3;text-decoration:none;display:block;margin-top:10px}
</style>
</head>
<body>
<div class="container">
<h2>Đăng nhập</h2>
<input id="username" placeholder="Username">
<input id="password" type="password" placeholder="Password">
<button id="btnLogin">Login</button>
<a href="register.html">Chưa có tài khoản? Đăng ký</a>
<div id="msg" style="margin-top:10px;color:#f44"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js"></script>
<script>
const firebaseConfig = {/* điền config của bạn */};
const app = firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const btnLogin = document.getElementById('btnLogin');
const msg = document.getElementById('msg');

btnLogin.onclick = async ()=>{
  const u = usernameInput.value.trim();
  const p = passwordInput.value.trim();
  if(!u || !p){ msg.innerText="Nhập username và password"; return; }

  const snapshot = await db.ref('users').orderByChild('username').equalTo(u).once('value');
  const val = snapshot.val();
  if(!val){ msg.innerText="Tài khoản không tồn tại"; return; }

  const userKey = Object.keys(val)[0];
  if(val[userKey].password !== p){ msg.innerText="Sai mật khẩu"; return; }

  localStorage.setItem('uid', userKey);
  localStorage.setItem('username', u);
  location.href='index.html';
};
</script>
</body>
</html>
